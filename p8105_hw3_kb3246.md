Viz and EDA
================
Kasturi Bhamidipati
2022-10-13

First we will load the packages that we need!

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
    ## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
    ## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
    ## ✔ tidyr   1.2.0      ✔ stringr 1.4.1 
    ## ✔ readr   2.1.2      ✔ forcats 0.5.2 
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(ggridges)
library(skimr)
```

# Problem 2

We need to load and tidy the dataset.

``` r
accel_data = 
  read_csv(
    "data/accel_data.csv")%>% 
  janitor::clean_names() %>% 
  pivot_longer(
    activity_1:activity_1440,
    names_to = "minute", 
    names_prefix = "activity_",
    values_to = "activity"
    ) %>% 
  mutate( minute = as.numeric(minute),
          day_of_the_week = 
            recode(day,
                 "Monday" = "Weekday", 
                 "Tuesday" = "Weekday",
                 "Wednesday" = "Weekday", 
                 "Thursday" = "Weekday", 
                 "Friday"= "Weekday", 
                 "Saturday" = "Weekend", 
                 "Sunday"= "Weekend"
                   )
  )
```

    ## Rows: 35 Columns: 1443
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr    (1): day
    ## dbl (1442): week, day_id, activity.1, activity.2, activity.3, activity.4, ac...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Summary of the `accel_data` dataset

This is the `accel_data` dataset.

|                                                  |            |
|:-------------------------------------------------|:-----------|
| Name                                             | accel_data |
| Number of rows                                   | 50400      |
| Number of columns                                | 6          |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |            |
| Column type frequency:                           |            |
| character                                        | 2          |
| numeric                                          | 4          |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |            |
| Group variables                                  | None       |

Data summary

**Variable type: character**

| skim_variable   | n_missing | complete_rate | min | max | empty | n_unique | whitespace |
|:----------------|----------:|--------------:|----:|----:|------:|---------:|-----------:|
| day             |         0 |             1 |   6 |   9 |     0 |        7 |          0 |
| day_of_the_week |         0 |             1 |   7 |   7 |     0 |        2 |          0 |

**Variable type: numeric**

| skim_variable | n_missing | complete_rate |   mean |     sd |  p0 |    p25 |   p50 |     p75 | p100 | hist  |
|:--------------|----------:|--------------:|-------:|-------:|----:|-------:|------:|--------:|-----:|:------|
| week          |         0 |             1 |   3.00 |   1.41 |   1 |   2.00 |   3.0 |    4.00 |    5 | ▇▇▇▇▇ |
| day_id        |         0 |             1 |  18.00 |  10.10 |   1 |   9.00 |  18.0 |   27.00 |   35 | ▇▇▇▇▇ |
| minute        |         0 |             1 | 720.50 | 415.70 |   1 | 360.75 | 720.5 | 1080.25 | 1440 | ▇▇▇▇▇ |
| activity      |         0 |             1 | 267.04 | 443.16 |   1 |   1.00 |  74.0 |  364.00 | 8982 | ▇▁▁▁▁ |

-   It consists of 50400 rows and 6 columns.

-   The dataset gives us information on the the day of the exercise, the
    minute of the day, the activity count, a unique `day_ID` variable
    for each day, a variable categorizing the days into either weekdays
    or weekends and the week number.

### Total Acitivity - Traditional Analysis

Here we have the code chunk to calculate total activity per day, across
the different weeks.

``` r
traditional_anal = 
  accel_data %>% 
  group_by(week, day) %>%
  summarise(total_activity = sum(activity)) %>%
  pivot_wider(
    names_from = day, 
    values_from = total_activity
  ) %>%
  select("week","Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday")
```

    ## `summarise()` has grouped output by 'week'. You can override using the
    ## `.groups` argument.

Yes, there are trends that are apparent. I notice that, on average, the
total activity during the weekdays is more than that of the weekends. I
also find some irregular/potentially wrong data values because in weeks
4 and 5, the total activity on Saturday is extremely low, which ideally
should not be the case.

### Single Panel Plot

``` r
  accel_data %>%
  ggplot(aes(x = minute/60, y = activity, color = day))+
  geom_line(alpha = .5)+ 
  geom_smooth( aes(group = day,se = FALSE))+ 
  labs(
    title = "24-hour Activity Time Courses For Each Day", 
    x = "Hour", 
    y = "Activity"
  )+
  theme_bw()
```

    ## `geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = "cs")'

![](p8105_hw3_kb3246_files/figure-gfm/unnamed-chunk-1-1.png)<!-- -->

What do we say about this?????

# Problem 3

First we want to load the package.

``` r
library(p8105.datasets)
data("ny_noaa")
```

### Summary of `ny_noaa` dataset

This is the `ny_noaa` dataset.

|                                                  |         |
|:-------------------------------------------------|:--------|
| Name                                             | ny_noaa |
| Number of rows                                   | 2595176 |
| Number of columns                                | 7       |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |         |
| Column type frequency:                           |         |
| character                                        | 3       |
| Date                                             | 1       |
| numeric                                          | 3       |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |         |
| Group variables                                  | None    |

Data summary

**Variable type: character**

| skim_variable | n_missing | complete_rate | min | max | empty | n_unique | whitespace |
|:--------------|----------:|--------------:|----:|----:|------:|---------:|-----------:|
| id            |         0 |          1.00 |  11 |  11 |     0 |      747 |          0 |
| tmax          |   1134358 |          0.56 |   1 |   4 |     0 |      532 |          0 |
| tmin          |   1134420 |          0.56 |   1 |   4 |     0 |      548 |          0 |

**Variable type: Date**

| skim_variable | n_missing | complete_rate | min        | max        | median     | n_unique |
|:--------------|----------:|--------------:|:-----------|:-----------|:-----------|---------:|
| date          |         0 |             1 | 1981-01-01 | 2010-12-31 | 1997-01-21 |    10957 |

**Variable type: numeric**

| skim_variable | n_missing | complete_rate |  mean |     sd |  p0 | p25 | p50 | p75 |  p100 | hist  |
|:--------------|----------:|--------------:|------:|-------:|----:|----:|----:|----:|------:|:------|
| prcp          |    145838 |          0.94 | 29.82 |  78.18 |   0 |   0 |   0 |  23 | 22860 | ▇▁▁▁▁ |
| snow          |    381221 |          0.85 |  4.99 |  27.22 | -13 |   0 |   0 |   0 | 10160 | ▇▁▁▁▁ |
| snwd          |    591786 |          0.77 | 37.31 | 113.54 |   0 |   0 |   0 |   0 |  9195 | ▇▁▁▁▁ |

-   It has 2595176 rows and 7 columns.

-   The dataset gives us information on precipitation, snow fall, snow
    depth, maximum and minimum temperatures on a specific day, in New
    York State. It also gives us information on the weather station ID
    through which the data was collected.

-   It includes the years 1981 to 2010.

### Cleaning the dataset

``` r
nyc_weather = 
  ny_noaa %>%
  janitor::clean_names() %>%
  separate(date, into = c("year", "month", "day"), sep = "-", convert = TRUE)%>%
  mutate(month = month.abb[month], 
         prcp = prcp*10, 
         tmax = as.numeric(tmax),
         tmin = as.numeric(tmin)
  ) %>% 
  select(id, day, month, year, everything()) %>% 
  mutate(
    tmax = tmax*10,
    tmin = tmin*10
    )
```
